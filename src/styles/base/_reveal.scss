@use '../util/project/reveal' as *;

/*
Reveal

Styles for revealed elements
*/

// Does nothing on its on, but will trigger the addition of a .is-visible
// class on the element which can be use to implement custom animation.
.js [data-module-reveal='animate'] {
}

// Does nothing on its on, but if set all children will animate in
// when this element animates in.
.js [data-module-reveal='stagger-children'] {
}

// Automatically staggered delays on children based on :nth-child
@for $idx from 1 through 50 {
  .js [data-reveal-delay]:nth-child(#{$idx}) {
    transition-delay: reveal-delay($idx);
  }
}

// Manual delays
@for $idx from 1 through 50 {
  .js [data-reveal-delay='#{$idx}']:nth-child(1n) {
    transition-delay: reveal-delay($idx);
  }
}

// Remove all reveals
.h-no-reveal {
  transition: none !important;
  transition-delay: 0s !important;
}

@media screen and (prefers-reduced-motion: no-preference) {
  @each $direction
    in ('fade', 'up', 'up-less', 'down', 'left', 'right', 'scale')
  {
    .js [data-module-reveal='#{$direction}'] {
      @include reveal-hidden($direction);

      &.is-visible {
        @include reveal;
      }
    }
  }
}
