{# =============================================================== #}
{# Matrix
{# =============================================================== #}
{#
  {% import '_macros/matrix' as matrix %}
#}

{# ------------------------------------------------------------------ #}
{# Block Classes
{# ------------------------------------------------------------------ #}
{#
  {% import '_macros/matrix' as matrix %}
  {{ matrix.blockClasses(handle, block, previousBlock, nextBlock) }}

  Returns an array of modifier classes for a given matrix block

  @param handle (string)                     - [required] Handle for the block
  @param block (Matrix Block)                - [required] The block to examine
  @param previousBlock (Matrix Block)        - [optional] The block prior to this one
  @param nextBlock (Matrix Block)            - [optional] The block after to this one
#}

{% macro blockClasses(handle, block, previousBlock = null, nextBlock = null) %}
  {% set classes = [] %}

  {# All spacing #}
  {% if handle not in [
    'hero-video',
    'hero-text',
    'team-bio',
    'values-slider',
    'hero-slim',
  ] %}
    {# Top padding #}
    {% if handle not in [] %}
      {% set classes = classes | merge(['space-top']) %}
    {% endif %}

    {# Bottom spacing #}
    {% if handle not in [] %}
      {% set classes = classes | merge(['space-bottom']) %}
    {% endif %}
  {% else %}
    {% set classes = classes | merge(['bleed-top', 'bleed-bottom']) %}
  {% endif %}

  {# Bleed / Top #}
  {% if handle in [] %}
    {% set classes = classes | merge(['bleed-top']) %}
  {% endif %}

  {# Bleed / Bottom #}
  {% if handle in [] %}
    {% set classes = classes | merge(['bleed-bottom ']) %}
  {% endif %}

  {# Bleed Mobile (no top/bottom spacing on mobile) #}
  {% if handle in [] %}
    {% set classes = classes | merge(['bleed-top-mobile', 'bleed-bottom-mobile']) %}
  {% endif %}

  {# Overflow Hidden #}
  {% if handle in [] %}
    {% set classes = classes | merge(['overflow-hidden']) %}
  {% endif %}

  {# Max #}
  {% if handle not in [] %}
    {% set classes = classes | merge(['max']) %}
  {% endif %}

  {# Borders #}
  {% set borderedBlocks = [] %}
  {% if handle in borderedBlocks and (nextBlock.handle ??? null) in borderedBlocks %}
    {% set classes = classes | merge(['border-bottom', 'bleed-bottom']) %}
  {% endif %}
  {% if handle in borderedBlocks and (previousBlock.handle ??? null) in borderedBlocks %}
    {% set classes = classes | merge(['border-top', 'bleed-top']) %}
  {% endif %}

  {# Background Color #}
  {% set isLightBg = block.color ?? true %}
  {% if handle in [] or not isLightBg %}
    {% set classes = classes | merge(['bg-dark']) %}
  {% elseif handle in [] %}
    {% set classes = classes | merge([]) %}
  {% else %}
    {% set classes = classes | merge(['bg-light']) %}
  {% endif %}

  {% return classes %}
{% endmacro %}
